const d=document.getElementById("chat-window"),y=document.getElementById("close-chat"),o=document.getElementById("chat-toggle"),n=document.getElementById("chat-messages"),w=document.getElementById("chat-form"),m=document.getElementById("chat-input"),a=document.getElementById("quick-replies"),u=document.getElementById("chat-icon-open"),g=document.getElementById("chat-icon-close"),i={greeting:{keywords:["你好","hello","hi","在吗","您好"],response:"您好！我是聚财众发的智能客服小聚，很高兴为您服务。请问您想了解网站的哪方面内容？",replies:["如何阅读文章？","如何收听播客？","网站加载慢怎么办？","联系人工客服"]},read_article:{keywords:["文章","阅读","文章列表","研究","专栏"],response:"您可以点击导航栏中的**「研究文章」**进入文章列表页，您还可以通过页面上方的专栏按钮筛选文章，例如**日斗专栏**和**聚财策略**。",replies:["好的，谢谢","如何收听播客？","网站加载慢怎么办？"]},listen_podcast:{keywords:["播客","收听","音频","播放","节目"],response:"您可以点击导航栏中的**「聚财播客」**进入播客列表页。在播客详情页，点击音频播放器即可收听，下方还提供文字稿供您同步阅读。",replies:["好的，谢谢","如何阅读文章？","音频无法播放怎么办？"]},website_slow:{keywords:["加载慢","卡","很慢","打不开"],response:"如果您觉得网站加载缓慢，请尝试以下方法：<br>1. 检查您的网络连接。<br>2. 清除浏览器缓存。<br>3. 尝试使用其他浏览器。如果问题依然存在，请联系人工客服。",replies:["好的，谢谢","音频无法播放怎么办？","联系人工客服"]},audio_error:{keywords:["音频","播放不了","没声音","播不了"],response:"如果播客音频无法播放，请尝试：<br>1. 检查您的网络连接是否稳定。<br>2. 确认您的浏览器是否支持音频播放。<br>3. 尝试刷新页面或更换浏览器。如果问题依旧，请联系人工客服。",replies:["好的，谢谢","网站加载慢怎么办？","联系人工客服"]},get_more_info:{keywords:["更多","资讯","投资","分析","报告"],response:"您可以：<br>1. 定期访问我们的网站查看最新的文章和播客。<br>2. 关注我们的官方微信公众号。<br>3. 如果您需要专属投资报告，请直接联系我们的客服。",replies:["好的，谢谢","联系人工客服"]},contact_us:{keywords:["联系","人工","真人","客服","电话","邮箱","地址"],response:"如有任何问题或建议，您可以：<br><br>发送邮件至：<strong class='text-blue-600'>Athen@lianghuatozi.com</strong><br>致电我们：<strong class='text-blue-600'>852 4676 1866</strong><br>关注微信公众号获取更多资讯。<br>我们的办公地址是：武汉市武昌区金融街88号聚财大厦15层。",replies:["好的，谢谢","还有其他问题"]},thanks:{keywords:["谢谢","感谢"],response:"不客气，很高兴能帮到您！如果还有其他问题，随时可以问我。",replies:["如何阅读文章？","如何收听播客？","联系人工客服"]},default:{keywords:[],response:"抱歉，我不太理解您的问题。您可以尝试以下选项：",replies:["如何阅读文章？","如何收听播客？","网站加载慢怎么办？","联系人工客服"]}};function p(){d.classList.contains("hidden")?(d.classList.remove("hidden"),o.classList.add("scale-0"),setTimeout(()=>{u.classList.add("hidden"),g.classList.remove("hidden"),o.classList.remove("scale-0")},150),n.children.length===0&&c("你好")):(d.classList.add("hidden"),o.classList.add("scale-0"),setTimeout(()=>{u.classList.remove("hidden"),g.classList.add("hidden"),o.classList.remove("scale-0")},150))}function l(s,e){const t=document.createElement("div");t.classList.add("mb-4","max-w-[85%]","p-3","rounded-lg","text-sm","md:text-base","leading-relaxed","shadow-sm"),e==="bot"?(t.classList.add("bg-white","self-start"),t.innerHTML=s):(t.classList.add("bg-blue-500","text-white","self-end","ml-auto"),t.textContent=s),n.appendChild(t),n.scrollTop=n.scrollHeight}function c(s){const e=document.createElement("div");e.id="typing-indicator",e.classList.add("mb-4","max-w-[85%]","p-3","rounded-lg","text-sm","bg-white","self-start","shadow-sm","text-gray-500"),e.innerHTML='<div class="flex items-center space-x-1"><span class="block w-2 h-2 bg-gray-400 rounded-full typing-dot"></span><span class="block w-2 h-2 bg-gray-400 rounded-full typing-dot"></span><span class="block w-2 h-2 bg-gray-400 rounded-full typing-dot"></span></div>',n.appendChild(e),n.scrollTop=n.scrollHeight;let t=i.default;for(const h in i){const r=i[h];if(r.keywords.some(b=>s.toLowerCase().includes(b.toLowerCase()))){t=r;break}}setTimeout(()=>{document.getElementById("typing-indicator")&&n.removeChild(e),l(t.response,"bot"),L(t.replies)},1e3+Math.random()*1e3)}function L(s){a.innerHTML="",s.forEach(e=>{const t=document.createElement("button");t.classList.add("px-3","py-1","border","border-blue-500","text-blue-500","rounded-full","text-sm","hover:bg-blue-50","transition-colors"),t.textContent=e,t.addEventListener("click",()=>{l(e,"user"),c(e),a.innerHTML=""}),a.appendChild(t)})}o.addEventListener("click",p);y.addEventListener("click",p);w.addEventListener("submit",s=>{s.preventDefault();const e=m.value.trim();e&&(l(e,"user"),m.value="",c(e))});
